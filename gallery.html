<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gallery - TuneWithVaish</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: white;
    }
    .hidden-card {
      display: none !important;
    }
  </style>
</head>
<body class="text-white">

  <!-- Navbar -->
  <nav class="relative z-10 bg-black bg-opacity-90 p-4 md:px-10 flex flex-col md:flex-row justify-between items-center shadow-lg">
    <div class="flex items-center gap-2">
      <img src="logo.png" alt="Logo" class="h-10 w-10 rounded-full object-cover shadow-md" />
      <span class="text-2xl font-bold text-purple-400">TuneWithVaish</span>
    </div>
    <ul class="flex flex-col md:flex-row gap-4 md:gap-6 text-sm font-medium mt-4 md:mt-0">
      <li><a href="index.html" class="hover:text-purple-400 transition">🏠 Home</a></li>
      <li><a href="gallery.html" class="hover:text-purple-400 transition">🎬 Gallery</a></li>
      <li><a href="about.html" class="hover:text-purple-400 transition">🙋‍♀️ About</a></li>
      <li><a href="contact.html" class="hover:text-purple-400 transition">📬 Contact</a></li>
      <li>
        <a href="https://youtube.com/@feel_the_music2005" target="_blank" class="bg-purple-600 px-4 py-2 rounded hover:bg-purple-700 text-white font-semibold transition">
          🔔 Subscribe
        </a>
      </li>
    </ul>
  </nav>

  <!-- Filter + Search -->
  <section class="px-6 py-12">
    <div class="flex justify-center gap-4 flex-wrap mb-8">
      <button onclick="filterSongs('all')" class="bg-gray-700 px-4 py-2 rounded hover:bg-purple-500">All</button>
      <button onclick="filterSongs('hindi')" class="bg-yellow-600 px-4 py-2 rounded hover:bg-yellow-700">Hindi</button>
      <button onclick="filterSongs('telugu')" class="bg-pink-600 px-4 py-2 rounded hover:bg-pink-700">Telugu</button>
      <button onclick="filterSongs('tamil')" class="bg-green-600 px-4 py-2 rounded hover:bg-green-700">Tamil</button>
    </div>

    <div class="mb-8 max-w-md mx-auto">
      <input
        type="text"
        id="searchInput"
        onkeyup="searchSongs()"
        placeholder="🔍 Search songs..."
        class="w-full px-4 py-2 rounded border border-gray-600 bg-gray-800 text-white focus:outline-none focus:ring focus:ring-purple-400"
      />
    </div>

    <!-- 🎵 Manual Songs Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8" id="songContainer">
      <div class="song-card bg-gray-900 p-4 rounded-lg shadow-lg" data-language="hindi">
        <iframe class="w-full rounded aspect-video" src="https://www.youtube.com/embed/xyz1" allowfullscreen></iframe>
        <h4 class="text-xl mt-4 font-semibold">Dil Se 💖</h4>
        <p class="text-sm text-gray-400">#romantic #hindi</p>
      </div>

      <div class="song-card bg-gray-900 p-4 rounded-lg shadow-lg" data-language="telugu">
        <iframe class="w-full rounded aspect-video" src="https://www.youtube.com/embed/03lNwmgqUnU" allowfullscreen></iframe>
        <h4 class="text-xl mt-4 font-semibold">Kopam marichanugaa 💘</h4>
        <p class="text-sm text-gray-400">#telugu #love</p>
      </div>

      <div class="song-card bg-gray-900 p-4 rounded-lg shadow-lg" data-language="tamil">
        <iframe class="w-full rounded aspect-video" src="https://www.youtube.com/embed/xyz3" allowfullscreen></iframe>
        <h4 class="text-xl mt-4 font-semibold">Vinnaithaandi Varuvaayaa 🌧️</h4>
        <p class="text-sm text-gray-400">#tamil #arrahman</p>
      </div>

      <!-- Hidden songs -->
      <div class="song-card bg-gray-900 p-4 rounded-lg shadow-lg hidden-card" data-language="hindi">
        <iframe class="w-full rounded aspect-video" src="https://www.youtube.com/embed/xyz4" allowfullscreen></iframe>
        <h4 class="text-xl mt-4 font-semibold">Tum Hi Ho 🎤</h4>
        <p class="text-sm text-gray-400">#hindi #romantic</p>
      </div>

      <div class="song-card bg-gray-900 p-4 rounded-lg shadow-lg hidden-card" data-language="telugu">
        <iframe class="w-full rounded aspect-video" src="https://www.youtube.com/embed/xyz5" allowfullscreen></iframe>
        <h4 class="text-xl mt-4 font-semibold">Nee Kallalona 🌸</h4>
        <p class="text-sm text-gray-400">#telugu #melody</p>
      </div>
    </div>

    <div class="text-center mt-8">
      <button id="loadMoreBtn" onclick="loadMoreSongs()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded">
        Load More Songs
      </button>
    </div>

    <!-- 📹 Auto-Fetched YouTube Shorts Section -->
    <div class="mt-16">
      <h2 class="text-2xl font-bold text-center mb-6 text-purple-400">🎥 Latest YouTube Shorts</h2>
      <div id="youtube-videos" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>
      <div class="text-center mt-8">
        <button id="loadMoreYTBtn" onclick="loadMoreYouTubeVideos()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded">
          Load More YouTube Shorts
        </button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center text-xs text-gray-500 py-6 bg-gray-900">
    © <span id="year"></span> TuneWithVaish. All rights reserved.
  </footer>

  <!-- ✅ Scripts -->
  <script>
    // Set year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Song filtering
    function filterSongs(language) {
      const cards = document.querySelectorAll(".song-card");
      cards.forEach(card => {
        const lang = card.getAttribute("data-language");
        const matchesLanguage = (language === 'all' || language === lang);
        const matchesSearch = searchMatch(card);
        card.style.display = (matchesLanguage && matchesSearch) ? "block" : "none";
      });
    }

    function searchSongs() {
      const input = document.getElementById("searchInput").value.toLowerCase();
      const cards = document.querySelectorAll(".song-card");
      cards.forEach(card => {
        const title = card.querySelector("h4").textContent.toLowerCase();
        const tags = card.querySelector("p").textContent.toLowerCase();
        card.style.display = (title.includes(input) || tags.includes(input)) ? "block" : "none";
      });
    }

    function searchMatch(card) {
      const input = document.getElementById("searchInput").value.toLowerCase();
      const title = card.querySelector("h4").textContent.toLowerCase();
      const tags = card.querySelector("p").textContent.toLowerCase();
      return (title.includes(input) || tags.includes(input));
    }

    function loadMoreSongs() {
      const hiddenCards = document.querySelectorAll(".hidden-card");
      hiddenCards.forEach(card => card.classList.remove("hidden-card"));
      document.getElementById("loadMoreBtn").style.display = "none";
    }

    // YouTube Shorts Logic
    const apiKey = "AIzaSyA471ltktjOqmk1cjYF0ITJ4DPoOnwqsoU";
    const channelId = "UCNcsywTkO-tLMcEyRugIBUw";
    const baseUrl = "https://www.googleapis.com/youtube/v3/search";
    const allVideos = [];
    const maxResults = 50;

    async function fetchAllVideos(pageToken = "") {
      const url = `${baseUrl}?key=${apiKey}&channelId=${channelId}&part=snippet,id&order=date&type=video&maxResults=${maxResults}` +
                  (pageToken ? `&pageToken=${pageToken}` : "");

      try {
        const response = await fetch(url);
        const data = await response.json();

        const videos = data.items.filter(item => item.id.kind === 'youtube#video');
        allVideos.push(...videos);

        if (data.nextPageToken) {
          await fetchAllVideos(data.nextPageToken);  // Recursive
        } else {
          displayYouTubeVideos(6); // Initial load
        }
      } catch (error) {
        console.error("Failed to fetch YouTube videos:", error);
      }
    }

    function displayYouTubeVideos(count) {
      const container = document.getElementById("youtube-videos");
      container.innerHTML = "";
      allVideos.slice(0, count).forEach(item => {
        const videoHTML = `
          <div class="bg-gray-900 p-4 rounded-lg shadow-lg">
            <iframe class="w-full rounded aspect-video"
              src="https://www.youtube.com/embed/${item.id.videoId}"
              frameborder="0" allowfullscreen></iframe>
            <h4 class="text-xl mt-4 font-semibold">${item.snippet.title}</h4>
            <p class="text-sm text-gray-400">${item.snippet.publishedAt.slice(0, 10)}</p>
          </div>
        `;
        container.innerHTML += videoHTML;
      });

      const loadBtn = document.getElementById("loadMoreYTBtn");
      loadBtn.style.display = (count >= allVideos.length) ? "none" : "inline-block";
    }

    function loadMoreYouTubeVideos() {
      displayYouTubeVideos(allVideos.length); // Show all
    }

    fetchAllVideos(); // Start on load
  </script>

</body>
</html>
